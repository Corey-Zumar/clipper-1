FROM r-base

RUN apt-get update && apt-get --yes install git libzmq3-dev libtool libtool-bin libsodium-dev pkg-config build-essential autoconf automake

RUN wget http://download.zeromq.org/zeromq-4.1.4.tar.gz && tar -xvf zeromq-4.1.4.tar.gz

RUN cd zeromq-4.1.4 && ./autogen.sh && ./configure && make install

COPY rclipper_docker rclipper

RUN R -e "install.packages('jsonlite', repos='http://cran.us.r-project.org')" 
RUN R -e "install.packages('Rcpp', repos='http://cran.us.r-project.org')"
RUN R -e "install.packages('optparse', repos='http://cran.us.r-project.org')"

RUN R CMD INSTALL rclipper

